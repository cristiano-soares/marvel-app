(this["webpackJsonpmarvel-app"]=this["webpackJsonpmarvel-app"]||[]).push([[0],{23:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(17),s=n.n(i),o=(n(23),n(2)),r=n(7),l=n(6),u=n.n(l);n(42);var j=n(0),d=function(){return Object(j.jsx)("div",{className:"spinner-grow-backdrop",children:Object(j.jsx)("div",{className:"spinner-grow"})})},b=(n(44),n(45),function(e){var t=e.onChange;return Object(j.jsx)("div",{className:"search-wrapper",children:Object(j.jsx)("input",{type:"search",className:"search-box",placeholder:"Qual quadrinho voc\xea procura?",onChange:t})})}),m=(n(46),function(e){var t=e.comic,n=e.onClose,c=e.onSelect;return Object(j.jsx)("div",{className:"details-wrapper",children:Object(j.jsxs)("div",{className:"details-content",children:[Object(j.jsx)("img",{src:t.thumbnail.path+"."+t.thumbnail.extension,alt:t.title}),Object(j.jsxs)("div",{className:"details-overview",children:[Object(j.jsxs)("div",{className:"overview-body",children:[Object(j.jsx)("h2",{children:t.title}),Object(j.jsxs)("p",{children:["N\xfamero de p\xe1ginas: ",0===t.pageCount?Object(j.jsx)("em",{children:"N\xe3o informado"}):t.pageCount]})]}),Object(j.jsxs)("div",{className:"overview-footer",children:[!t.isSelected&&Object(j.jsx)("button",{type:"button",onClick:c,children:"Selecionar e fechar"}),Object(j.jsx)("button",{type:"button",onClick:n,children:"Fechar"})]})]})]})})}),h=(n(47),function(e){var t=e.comics,n=e.lastComicElementRef,c=e.checkSelectedComic,a=e.handleSelection,i=e.handleShowDetails;return Object(j.jsx)("ul",{className:"comics-wrapper",children:t.map((function(e,s){return t.length===s+1?Object(j.jsxs)("li",{ref:n,className:"comic"+(c(e)?" selected":""),onClick:function(){return a(e)},children:[Object(j.jsx)("img",{className:"comic-cover",src:e.thumbnail.path+"."+e.thumbnail.extension,alt:e.title}),Object(j.jsx)("button",{className:"comic-title",title:"Ver detalhes do quadrinho",onClick:function(t){return i(t,e)},children:e.title})]},s):Object(j.jsxs)("li",{className:"comic"+(c(e)?" selected":""),onClick:function(){return a(e)},children:[Object(j.jsx)("img",{className:"comic-cover",src:e.thumbnail.path+"."+e.thumbnail.extension,alt:e.title}),Object(j.jsx)("button",{className:"comic-title",title:"Ver detalhes do quadrinho",onClick:function(t){return i(t,e)},children:e.title})]},s)}))})}),O=(n(48),function(e){var t=e.selectedComics,n=e.onOpenMailForm,c=e.onCancelSelection;return Object(j.jsxs)("div",{className:"footer",children:[Object(j.jsx)("span",{children:t.size+(t.size>1?" quadrinhos selecionados":" quadrinho selecionado")}),Object(j.jsx)("button",{type:"button",onClick:n,children:"Enviar por e-mail"}),Object(j.jsx)("button",{type:"button",onClick:c,children:"Cancelar"})]})}),f=n(18),p=n.n(f);n(51);function v(e){var t=e.onCancelSendMail,n=e.selectedComics,a=Object(c.useState)(""),i=Object(o.a)(a,2),s=i[0],r=i[1],l=Object(c.useState)(!1),u=Object(o.a)(l,2),b=u[0],m=u[1],h=Object(c.useState)(!1),O=Object(o.a)(h,2),f=O[0],v=O[1],x=Object(c.useState)(""),g=Object(o.a)(x,2),C=g[0],S=g[1];Object(c.useEffect)((function(){var e=document.getElementById("email");e&&e.focus()})),Object(c.useEffect)((function(){S(function(){var e='<ul style="padding: 0; list-style:none;">';return n.forEach((function(t){e+='<li style="margin: 8px;">\n            <img src='.concat(t.thumbnail.path,".").concat(t.thumbnail.extension," alt=").concat(t.title,' width="200px" />\n            <br/>\n            <span style="margin: 8px 0 16px 0;">').concat(t.title,"</span>\n            </li>")})),e+="</ul>"}())}),[n]);return Object(j.jsxs)(j.Fragment,{children:[b&&Object(j.jsx)(d,{}),Object(j.jsx)("div",{className:"modal",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("div",{className:"modal-header",children:Object(j.jsx)("h2",{children:"Enviar quadrinhos por e-mail"})}),Object(j.jsxs)("div",{className:"modal-body",children:[!f&&Object(j.jsxs)("form",{id:"emailForm",className:"mail-form",children:[Object(j.jsx)("input",{id:"email",type:"email",name:"user_email",placeholder:"Digite seu e-mail aqui",value:s,onChange:function(e){r(e.target.value)}}),Object(j.jsx)("textarea",{name:"message",value:C})]}),f&&Object(j.jsx)("p",{children:"Seu e-mail foi enviado com sucesso!"})]}),Object(j.jsxs)("div",{className:"modal-footer",children:[!f&&Object(j.jsx)("button",{type:"button",onClick:function(){m(!0),function(e){return p.a.sendForm("service_sijp3it","template_v4wyes2",e,"user_OByWmLBYYUNd6TeliICaD")}(document.getElementById("emailForm")).then((function(){m(!1),v(!0)}))},children:"Enviar"}),Object(j.jsx)("button",{type:"button",onClick:t,children:f?"Ok":"Cancelar"})]})]})})]})}function x(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),l=s[0],f=s[1],p=Object(c.useState)(1),x=Object(o.a)(p,2),g=x[0],C=x[1],S=Object(c.useState)(new Set),N=Object(o.a)(S,2),w=N[0],y=N[1],k=Object(c.useState)(!1),E=Object(o.a)(k,2),F=E[0],q=E[1],M=function(e,t){var n=Object(c.useState)(!0),a=Object(o.a)(n,2),i=a[0],s=a[1],l=Object(c.useState)(!1),j=Object(o.a)(l,2),d=j[0],b=j[1],m=Object(c.useState)([]),h=Object(o.a)(m,2),O=h[0],f=h[1],p=Object(c.useState)(!1),v=Object(o.a)(p,2),x=v[0],g=v[1];return Object(c.useEffect)((function(){f([])}),[e]),Object(c.useEffect)((function(){var n;s(!0),b(!1);var c=0;t>1&&(c=20*t);var a={apikey:"44db65d7e1952869be0451a4c5426eda",hash:"ffd275c5130566a2916217b101f26150",limit:20,offset:c,orderBy:"title",noVariants:!0};return e&&(a.titleStartsWith=e),u()({baseURL:"https://gateway.marvel.com/v1/public/comics",params:a,timeout:1e4,method:"get",responseType:"json",cancelToken:new u.a.CancelToken((function(e){return n=e}))}).then((function(e){var t=e.data.data.results;f((function(e){return Object(r.a)(new Set([].concat(Object(r.a)(e),Object(r.a)(t))))})),g(t.length>0),s(!1)})).catch((function(e){u.a.isCancel(e)||(b(!0),s(!1))})),function(){return n()}}),[e,t]),{loading:i,error:d,comics:O,hasMore:x}}(n,g),B=M.comics,I=M.hasMore,D=M.loading,T=M.error,L=Object(c.useRef)(),R=Object(c.useCallback)((function(e){D||(L.current&&L.current.disconnect(),L.current=new IntersectionObserver((function(e){e[0].isIntersecting&&I&&C((function(e){return e+1}))})),e&&L.current.observe(e))}),[D,I]),_=function(e){var t=new Set(w);t.has(e)?t.delete(e):t.add(e),y(t)},z=function(){y(new Set)},P=function(){f(null)};return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(b,{onChange:function(e){a(e.target.value),C(1)}}),D&&Object(j.jsx)(d,{}),l&&Object(j.jsx)(m,{comic:l,onClose:P,onSelect:function(){_(l),P()}}),Object(j.jsx)(h,{comics:B,lastComicElementRef:R,checkSelectedComic:function(e){return w.has(e)},handleSelection:_,handleShowDetails:function(e,t){e.preventDefault(),e.stopPropagation(),f(t)}}),D&&B.length>0&&Object(j.jsx)("div",{className:"spinner-grow spinner-grow-sm loader-inline"}),!D&&!T&&0===B.length&&Object(j.jsx)("h3",{children:"Nenhum quadrinho encontrado"}),T&&Object(j.jsx)("h3",{children:"Ocorreu um erro ao se comunicar com o servidor da Marvel"}),w.size>0&&Object(j.jsx)(O,{selectedComics:w,onOpenMailForm:function(){q(!0)},onCancelSelection:z}),F&&Object(j.jsx)(v,{onCancelSendMail:function(){z(),q(!1)},selectedComics:w})]})}var g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(x,{})}),document.getElementById("root")),g()}},[[52,1,2]]]);
//# sourceMappingURL=main.ca65165e.chunk.js.map