(this["webpackJsonpmarvel-app"]=this["webpackJsonpmarvel-app"]||[]).push([[0],{23:function(e,t,c){},42:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),i=c(17),o=c.n(i),s=(c(23),c(2)),r=c(7),l=c(6),u=c.n(l);c(42);var j=c(0),d=function(e){var t=e.backdropColor,c=e.showBackdrop,n="".concat(c||t?"spinner-grow-backdrop":""," ").concat(t?"backdrop-color":"");return Object(j.jsx)("div",{className:n,children:Object(j.jsx)("div",{className:"spinner-grow"})})},b=(c(44),c(45),function(e){var t=e.onChange;return Object(j.jsx)("div",{className:"search-wrapper",children:Object(j.jsx)("input",{type:"search",className:"search-box",placeholder:"Qual quadrinho voc\xea procura?",onChange:t})})}),m=(c(46),function(e){var t=e.comic,c=e.onClose,n=e.onSelect;return Object(j.jsx)("div",{className:"details-wrapper",children:Object(j.jsxs)("div",{className:"details-content",children:[Object(j.jsx)("img",{src:t.thumbnail.path+"."+t.thumbnail.extension,alt:t.title}),Object(j.jsxs)("div",{className:"details-overview",children:[Object(j.jsxs)("div",{className:"overview-body",children:[Object(j.jsx)("h2",{children:t.title}),Object(j.jsxs)("p",{children:["N\xfamero de p\xe1ginas: ",0===t.pageCount?Object(j.jsx)("em",{children:"N\xe3o informado"}):t.pageCount]})]}),Object(j.jsxs)("div",{className:"overview-footer",children:[!t.isSelected&&Object(j.jsx)("button",{type:"button",onClick:n,children:"Selecionar e fechar"}),Object(j.jsx)("button",{type:"button",onClick:c,children:"Fechar"})]})]})]})})});function h(e){var t=e.comic,c=e.onClickTitle,n="".concat(t.thumbnail.path,".").concat(t.thumbnail.extension);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("img",{className:"comic-cover",src:n,alt:t.title}),Object(j.jsx)("button",{className:"comic-title",title:"Ver detalhes do quadrinho",onClick:c,children:t.title})]})}c(47);var O=function(e){var t=e.comics,c=e.lastComicElementRef,n=e.checkSelectedComic,a=e.handleSelection,i=e.handleShowDetails;return Object(j.jsx)("ul",{className:"comics-wrapper",children:t.map((function(e,o){return t.length===o+1?Object(j.jsx)("li",{ref:c,className:"comic"+(n(e)?" selected":""),onClick:function(){return a(e)},children:Object(j.jsx)(h,{comic:e,onClickTitle:function(t){return i(t,e)}})},o):Object(j.jsx)("li",{className:"comic"+(n(e)?" selected":""),onClick:function(){return a(e)},children:Object(j.jsx)(h,{comic:e,onClickTitle:function(t){return i(t,e)}})},o)}))})},f=(c(48),function(e){var t=e.selectedComics,c=e.onOpenMailForm,n=e.onCancelSelection;return Object(j.jsxs)("div",{className:"footer",children:[Object(j.jsx)("span",{children:t.size+(t.size>1?" quadrinhos selecionados":" quadrinho selecionado")}),Object(j.jsx)("button",{type:"button",onClick:c,children:"Enviar por e-mail"}),Object(j.jsx)("button",{type:"button",onClick:n,children:"Cancelar"})]})}),p=c(18),v=c.n(p);c(51);function x(e){var t=e.onCancelSendMail,c=e.selectedComics,a=Object(n.useState)(""),i=Object(s.a)(a,2),o=i[0],r=i[1],l=Object(n.useState)(!1),u=Object(s.a)(l,2),b=u[0],m=u[1],h=Object(n.useState)(!1),O=Object(s.a)(h,2),f=O[0],p=O[1],x=Object(n.useState)(""),C=Object(s.a)(x,2),g=C[0],S=C[1];Object(n.useEffect)((function(){var e=document.getElementById("email");e&&e.focus()})),Object(n.useEffect)((function(){S(function(){var e='<ul style="padding: 0; list-style:none;">';return c.forEach((function(t){e+='<li style="margin: 8px;">\n            <img src='.concat(t.thumbnail.path,".").concat(t.thumbnail.extension," alt=").concat(t.title,' width="200px" />\n            <br/>\n            <span style="margin: 8px 0 16px 0;">').concat(t.title,"</span>\n            </li>")})),e+="</ul>"}())}),[c]);return Object(j.jsxs)(j.Fragment,{children:[b&&Object(j.jsx)(d,{backdropColor:!0}),Object(j.jsx)("div",{className:"modal",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("div",{className:"modal-header",children:Object(j.jsx)("h2",{children:"Enviar quadrinhos por e-mail"})}),Object(j.jsxs)("div",{className:"modal-body",children:[!f&&Object(j.jsxs)("form",{id:"emailForm",className:"mail-form",children:[Object(j.jsx)("input",{id:"email",type:"email",name:"user_email",placeholder:"Digite seu e-mail aqui",value:o,onChange:function(e){r(e.target.value)}}),Object(j.jsx)("textarea",{name:"message",value:g})]}),f&&Object(j.jsx)("p",{children:"Seu e-mail foi enviado com sucesso!"})]}),Object(j.jsxs)("div",{className:"modal-footer",children:[!f&&Object(j.jsx)("button",{type:"button",onClick:function(){m(!0),function(e){return v.a.sendForm("service_sijp3it","template_v4wyes2",e,"user_OByWmLBYYUNd6TeliICaD")}(document.getElementById("emailForm")).then((function(){m(!1),p(!0)})).finally((function(){m(!1)}))},children:"Enviar"}),Object(j.jsx)("button",{type:"button",onClick:t,children:f?"Ok":"Cancelar"})]})]})})]})}function C(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),l=o[0],h=o[1],p=Object(n.useState)(1),v=Object(s.a)(p,2),C=v[0],g=v[1],S=Object(n.useState)(new Set),k=Object(s.a)(S,2),N=k[0],y=k[1],w=Object(n.useState)(!1),E=Object(s.a)(w,2),F=E[0],B=E[1],T=function(e,t){var c=Object(n.useState)(!0),a=Object(s.a)(c,2),i=a[0],o=a[1],l=Object(n.useState)(!1),j=Object(s.a)(l,2),d=j[0],b=j[1],m=Object(n.useState)([]),h=Object(s.a)(m,2),O=h[0],f=h[1],p=Object(n.useState)(!1),v=Object(s.a)(p,2),x=v[0],C=v[1];return Object(n.useEffect)((function(){f([])}),[e]),Object(n.useEffect)((function(){var c;o(!0),b(!1);var n=0;t>1&&(n=20*t);var a={apikey:"44db65d7e1952869be0451a4c5426eda",hash:"ffd275c5130566a2916217b101f26150",limit:20,offset:n,orderBy:"title",noVariants:!0};return e&&(a.titleStartsWith=e),u()({baseURL:"https://gateway.marvel.com/v1/public/comics",params:a,timeout:1e4,method:"get",responseType:"json",cancelToken:new u.a.CancelToken((function(e){return c=e}))}).then((function(e){var t=e.data.data.results;f((function(e){return Object(r.a)(new Set([].concat(Object(r.a)(e),Object(r.a)(t))))})),C(t.length>0),o(!1)})).catch((function(e){u.a.isCancel(e)||(b(!0),o(!1))})),function(){return c()}}),[e,t]),{loading:i,error:d,comics:O,hasMore:x}}(c,C),M=T.comics,I=T.hasMore,q=T.loading,D=T.error,L=Object(n.useRef)(),R=Object(n.useCallback)((function(e){q||(L.current&&L.current.disconnect(),L.current=new IntersectionObserver((function(e){e[0].isIntersecting&&I&&g((function(e){return e+1}))})),e&&L.current.observe(e))}),[q,I]),_=function(e){var t=new Set(N);t.has(e)?t.delete(e):t.add(e),y(t)},z=function(){y(new Set)},P=function(){h(null)};return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(b,{onChange:function(e){a(e.target.value),g(1)}}),l&&Object(j.jsx)(m,{comic:l,onClose:P,onSelect:function(){_(l),P()}}),Object(j.jsx)(O,{comics:M,lastComicElementRef:R,checkSelectedComic:function(e){return N.has(e)},handleSelection:_,handleShowDetails:function(e,t){e.preventDefault(),e.stopPropagation(),h(t)}}),q&&Object(j.jsx)(d,{showBackdrop:0===M.length}),D&&Object(j.jsx)("h3",{children:"Ocorreu um erro ao se comunicar com o servidor da Marvel"}),N.size>0&&Object(j.jsx)(f,{selectedComics:N,onOpenMailForm:function(){B(!0)},onCancelSelection:z}),F&&Object(j.jsx)(x,{onCancelSendMail:function(){z(),B(!1)},selectedComics:N})]})}var g=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,53)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;c(e),n(e),a(e),i(e),o(e)}))};o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(C,{})}),document.getElementById("root")),g()}},[[52,1,2]]]);
//# sourceMappingURL=main.3a77dfe9.chunk.js.map